/* 
	*
	*
	jAlert v.3
	Made with love by Versatility Werks (http://flwebsites.biz)
	MIT Licensed
	*
	*
*/
function confirm(e,t){$.jAlert({type:"confirm",onConfirm:e,onDeny:t})}function alert(e,t){"undefined"==typeof t&&(t=e,e=""),$.jAlert({title:e,content:t})}function successAlert(e,t){"undefined"==typeof t&&(t=e,e="Success"),$.jAlert({title:e,content:t,theme:"green"})}function errorAlert(e,t){"undefined"==typeof t&&(t=e,e="Error"),$.jAlert({title:e,content:t,theme:"red"})}!function(e){e.fn.jAlert=function(t){var n=this,o=["default","green","red","black","blue"],i=["xsm","sm","md","lg","xlg","full"],s=["white","black"],r=[],a=["animated"],l=[];if(n.length>1)return e.fn.jAlert.debug("Multiple elements passed."),n.each(function(){e.fn.jAlert.debug("Re-instantiating with one element"),e(this).jAlert(n.options)}),this;if(n.options=e.extend({},e.fn.jAlert.defaults,t),e.fn.jAlert.debug("Options for this popup: "+JSON.stringify(n.options)),n.instance=!1,"confirm"==n.options.type&&(e.fn.jAlert.debug("Type is confirm"),n.options.content||(e.fn.jAlert.debug('No content passed. Defaulting to "'+n.options.confirmQuestion+'"'),n.options.content=n.options.confirmQuestion),n.options.btns=[{text:n.options.confirmBtnText,theme:"green","class":"confirmBtn",closeAlert:!0,onClick:n.options.onConfirm},{text:n.options.denyBtnText,theme:"red","class":"denyBtn",closeAlert:!0,onClick:n.options.onDeny}],e.fn.jAlert.debug("Creating buttons"),n.options.autofocus=n.options.confirmAutofocus,e.fn.jAlert.debug("Autofocus set to .confirmBtn")),-1==e.inArray(n.options.theme,o))return console.log("jAlert Config Error: Invalid theme selection."),!1;if(a.push("ja_"+n.options.theme),e.fn.jAlert.debug("Added theme to classes: "+JSON.stringify(n.options.theme)),!n.options.id){var d=Date.now().toString()+Math.floor(1e5*Math.random());n.options.id="ja_"+d,e.fn.jAlert.debug("No ID set. Creating unique: "+n.options.id)}if(n.options["class"]&&(e.fn.jAlert.debug("Applying your custom class(es): "+JSON.stringify(n.options["class"])),a.push(n.options["class"]),e.fn.jAlert.debug("Classes: "+JSON.stringify(a))),n.options.classes&&(e.fn.jAlert.debug("Applying your custom class(es): "+JSON.stringify(n.options.classes)),a.push(n.options.classes),e.fn.jAlert.debug("Classes: "+JSON.stringify(a))),n.options.title||(e.fn.jAlert.debug("No title set. Adding noTitle class"),a.push("ja_noTitle"),e.fn.jAlert.debug("Classes: "+JSON.stringify(a))),n.options.size&&("string"==typeof n.options.size&&-1==e.inArray(n.options.size,i)||"object"==typeof n.options.size&&("undefined"==typeof n.options.size.width||"undefined"==typeof n.options.size.height)))return console.log("jAlert Config Error: Invalid size selection (try a preset or make sure you're including height and width in your size object)."),!1;if(n.options.size?"object"==typeof n.options.size?(e.fn.jAlert.debug("Height/Width defined. Adding to styles."),r.push("width: "+n.options.size.width+";"),r.push("height: "+n.options.size.height+";"),e.fn.jAlert.debug("Style: "+JSON.stringify(r))):(e.fn.jAlert.debug("Setting size to "+n.options.sizes),a.push("ja_"+n.options.size),e.fn.jAlert.debug("Classes: "+JSON.stringify(a))):(e.fn.jAlert.debug("No size indicated. Set to sm."),a.push("ja_sm"),e.fn.jAlert.debug("Classes: "+JSON.stringify(a))),-1==e.inArray(n.options.backgroundColor,s))return console.log("jAlert Config Error: Invalid background color selection."),!1;l.push("ja_"+n.options.backgroundColor),e.fn.jAlert.debug("Adding background color "+n.options.backgroundColor),("object"==typeof n.options.btns||"array"==typeof n.options.btns||n.options.autofocus)&&(n.options.closeOnClick=!1,e.fn.jAlert.debug("closeOnClick disabled due to having buttons or autofocus")),n.options.onOpen=[n.options.onOpen];var c="onload='$.fn.jAlert.mediaLoaded($(this))'",f="<div class='ja_loader'>Loading...</div>";n.options.image?(e.fn.jAlert.debug("Adding Image"),n.options.content="<div class='ja_media_wrap'>"+f+"<img src='"+n.options.image+"' class='ja_img' "+c+"></div>"):n.options.video?(e.fn.jAlert.debug("Adding Video"),n.options.content="<div class='ja_media_wrap'>"+f+"<div class='ja_video'></div></div>",n.options.onOpen.unshift(function(t){var n=document.createElement("iframe");n.src=t.options.video,n.attachEvent?n.attachEvent("onload",function(){e.fn.jAlert.mediaLoaded(e(this))}):n.onload=function(){e.fn.jAlert.mediaLoaded(e(this))},t.find(".ja_video").append(n)})):n.options.iframe?(n.options.iframeHeight||(n.options.iframeHeight=.9*e(window).height()+"px"),e.fn.jAlert.debug("Adding iFrame with height: "+n.options.iframeHeight),n.options.content="<div class='ja_media_wrap'>"+f+"</div>",n.options.onOpen.unshift(function(t){var n=document.createElement("iframe");n.src=t.options.iframe,n.height=t.options.iframeHeight,n.className="ja_iframe",n.attachEvent?n.attachEvent("onload",function(){e.fn.jAlert.mediaLoaded(e(this))}):n.onload=function(){e.fn.jAlert.mediaLoaded(e(this))},t.find(".ja_media_wrap").append(n)})):n.options.ajax&&(n.options.content="<div class='ja_media_wrap'>"+f+"</div>",onAjaxCallbacks=n.options.onOpen,n.options.onOpen=[function(t){e.fn.jAlert.debug("Getting content from "+t.options.ajax),e.ajax(t.options.ajax,{async:!0,complete:function(n){t.find(".ja_media_wrap").replaceWith(n.responseText),e.each(onAjaxCallbacks,function(e,n){n(t)})},error:function(e){t.options.onAjaxFail(t,"Error getting content: Code: "+e.status+" : Msg: "+e.statusText)}})}]);var u=function(){return e(".jAlert:visible").length},p=function(){e(".ja_background").fadeOut(n.options.backgroundFadeSpeed,function(){e(this).remove(),e("body").css("overflow","auto")})},g=function(){if(e(".ja_background").length<1){var t=n.maxZIndex+1;e.fn.jAlert.debug("Adding background with z-index: "+t+"."),e("body").append('<div class="ja_background '+l.join(" ")+'" style="z-index: '+t+'"></div>').fadeIn(n.options.backgroundFadeSpeed)}else e.fn.jAlert.debug("Background already exists.")};n.maxZIndex=function(){Math.max.apply(null,e.map(e("body > *"),function(t){return"absolute"==e(t).css("position")?parseInt(e(t).css("z-index"))||1:void 0}))},n.centerAlert=function(){var t=e(window).height(),o=n.instance.height(),i=t-o;e.fn.jAlert.debug("Centering alert. viewportHeight: "+t+" alertHeight: "+o+" diff: "+i);var s=i/2;s>200&&(s-=100),0>=s&&(s=0),e.fn.jAlert.debug("Setting margin-top "+s+"px"),n.instance.css("margin-top",s+"px"),i>5?(e.fn.jAlert.debug("Diff is greater than 5px. Setting wrapper as position: fixed and body as overflow: hidden"),n.instance.parents(".ja_wrap").css("position","fixed"),e("body").css("overflow","hidden")):(e.fn.jAlert.debug("Diff is less than 5px. Setting wrapper as position: absolute (default) and body as overflow: auto (hopefully your default. Otherwise this can create issues)"),n.instance.parents(".ja_wrap").css("position","absolute"),e("body").css("overflow","auto"),e("html, body").animate({scrollTop:s-50},200))};var A=function(t,o){"hide"==t?(e.fn.jAlert.debug("Hiding alert: "+o.attr("id")),o.removeClass(n.options.showAnimation).addClass(n.options.hideAnimation)):(e.fn.jAlert.debug("Centering + Showing alert: "+o.attr("id")),o.centerAlert(),o.addClass(n.options.showAnimation).removeClass(n.options.hideAnimation).show())},j=function(t){if("undefined"==typeof t.href&&(t.href=""),"undefined"==typeof t["class"]&&(t["class"]=""),t["class"]+="undefined"==typeof t.theme?" ja_btn_default":" ja_btn_"+t.theme,"undefined"==typeof t.text&&(t.text=""),"undefined"==typeof t.id){var n=Date.now().toString()+Math.floor(1e5*Math.random());t.id="ja_btn_"+n}return"undefined"==typeof t.target&&(t.target="_self"),"undefined"==typeof t.closeAlert&&(t.closeAlert=!0),e("body").on("click","#"+t.id,function(n){var o=e(this);t.closeAlert&&o.parents(".jAlert").closeAlert();var i=!0;return"function"==typeof t.onClick&&(i=t.onClick(n,o)),!i||t.closeAlert?(n.preventDefault(),!1):i}),e.fn.jAlert.debug("Creating button "),"<a href='"+t.href+"' id='"+t.id+"' target='"+t.target+"' class='ja_btn "+t["class"]+"'>"+t.text+"</a> "};n.closeAlert=function(t,o){var i=e(this);return e.fn.jAlert.debug("- - - - CLOSING ALERT - - - -"+i.attr("id")),0!=t&&(e.fn.jAlert.debug("Remove != false, so default remove to true: "+i.attr("id")),t=!0),i.length&&(i.unbind("DOMSubtreeModified"),A("hide",i),window.setTimeout(function(){var s=i.parents(".ja_wrap");t?(e.fn.jAlert.debug("Remove is true, so removing the alert's wrapper + alert: "+i.attr("id")),s.remove()):(e.fn.jAlert.debug("Remove is false, so hiding the alert's wrapper + alert: "+i.attr("id")),s.hide()),"function"==typeof o?(e.fn.jAlert.debug("Running onClose callback (passed into closeAlert): "+i.attr("id")),o(i)):"function"==typeof n.options.onClose&&(e.fn.jAlert.debug("Running onClose callback (set in options): "+i.attr("id")),n.options.onClose(i)),u()<1&&(e.fn.jAlert.debug("No alerts are visible: "+i.attr("id")),p()),e.fn.jAlert.debug("- - - - DONE HIDING ALERT - - - -"+i.attr("id"))},n.options.animationTimeout)),this},n.showAlert=function(t,o,i,s){var r=e(this);e.fn.jAlert.debug("- - - - SHOWING Alert - - - -"+r.attr("id")),0!=t&&(e.fn.jAlert.debug("replaceOthers != false, so default to true: "+r.attr("id")),t=!0),o!==!1&&(o=!0),t&&(e.fn.jAlert.debug("Run closeAlert on all open alerts: "+r.attr("id")),e(".jAlert:visible").closeAlert(o)),g();var a=n.maxZIndex+1,l=r.parents(".ja_wrap");e.fn.jAlert.debug("Setting z-index on wrapper to "+a+" and showing it: "+r.attr("id")),l.css("z-index",a).show(),A("show",r),"function"==typeof s&&(e.fn.jAlert.debug("Setting options onClose to one passed to showAlert: "+r.attr("id")),n.options.onClose=s),window.setTimeout(function(){"function"==typeof i&&(e.fn.jAlert.debug("Running onOpen callback (passed to showAlert): "+r.attr("id")),i(r)),e.fn.jAlert.debug("- - - - DONE SHOWING ALERT - - - -"+r.attr("id"))},n.options.animationTimeout)};var b=function(t){e.fn.jAlert.debug("- - - - ADDING ALERT - - - -"+n.options.id);var o="",i=(e(".ja_wrap:last")[0],n.maxZIndex+1);e.fn.jAlert.debug("Setting z-index to "+i+" : "+n.options.id),o+='<div class="ja_wrap" style="z-index: '+i+';"><div class="jAlert '+a.join(" ")+'" style="'+r.join(" ")+'" id="'+n.options.id+'"><div>',n.options.closeBtn&&(e.fn.jAlert.debug("Adding close button: "+n.options.id),o+="<div class='closejAlert ja_close",n.options.closeBtnAlt&&(o+=" ja_close_alt"),o+="'>X</div>"),n.options.title&&(e.fn.jAlert.debug("Adding title: "+n.options.id),o+="<div class='ja_title'><div>"+n.options.title+"</div></div>"),o+='<div class="ja_body">'+t,n.options.btns&&(e.fn.jAlert.debug("Adding buttons: "+n.options.id),o+='<div class="ja_btn_wrap ',n.options.btnBackground&&(e.fn.jAlert.debug("Adding button background: "+n.options.id),o+="optBack"),o+='">'),"object"==typeof n.options.btns[0]?e.each(n.options.btns,function(e,t){"object"==typeof t&&(o+=j(t))}):"object"==typeof n.options.btns?o+=j(n.options.btns):n.options.btns&&console.log("jAlert Config Error: Incorrect value for btns (must be object or array of objects): "+n.options.btns),n.options.btns&&(o+="</div>"),o+="</div></div></div></div>";var s=e(o);return g(),n.options.replaceOtherAlerts&&(e.fn.jAlert.debug("Replacing other alerts if any visible: "+n.options.id),e(".jAlert:visible").closeAlert()),e("body").append(s),n.instance=e("#"+n.options.id),A("show",n.instance),n.options.closeBtn&&(e.fn.jAlert.debug("Adding closeBtn handler: "+n.options.id),n.instance.on("click",".closejAlert",function(t){return t.preventDefault(),e(this).parents(".jAlert").closeAlert(),!1})),n.options.closeOnClick&&(e.fn.jAlert.debug("Adding closeOnClick handler: "+n.options.id),e(document).off("mouseup"),e(document).on("mouseup",function(){e(".jAlert:visible").each(function(){var t=e(this);t.options.closeOnClick&&t.closeAlert()})})),n.options.closeOnEsc&&(e.fn.jAlert.debug("Adding closeOnEsc handler: "+n.options.id),e(document).off("keydown"),e(document).on("keydown",function(t){27===t.keyCode&&e(".jAlert:visible").each(function(){var t=e(this);t.options.closeOnEsc&&t.closeAlert()})})),n.options.onOpen&&(e.fn.jAlert.debug("Running onOpen callback(s): "+n.options.id),e.each(n.options.onOpen,function(e,t){t(n.instance)})),n.options.autofocus&&(e.fn.jAlert.debug("Autofocusing on element: "+n.options.id),n.instance.find(n.options.autofocus).focus()),n.instance.bind("DOMSubtreeModified",function(){n.instance.centerAlert()}),n.instance};return n.initialize=function(){return n.options.content||n.options.image||n.options.video||n.options.iframe||n.options.ajax?(n.options.content||(n.options.content=""),b(n.options.content)):(console.log("jAlert potential error: No content defined"),b(""))},n.initialize(),e.fn.jAlert.debug("- - - - DONE ADDING ALERT - - - -"),n},e.fn.jAlert.defaults={debug:!1,title:!1,content:!1,image:!1,video:!1,ajax:!1,onAjaxFail:function(e,t){e.closeAlert(),errorAlert(t)},iframe:!1,iframeHeight:!1,"class":"",classes:"",id:!1,showAnimation:"bounceIn",hideAnimation:"bounceOut",backgroundFadeSpeed:100,animationTimeout:600,theme:"default",backgroundColor:"black",size:!1,replaceOtherAlerts:!1,closeOnClick:!1,closeOnEsc:!0,closeBtn:!0,closeBtnAlt:!1,btns:!1,btnBackground:!0,autofocus:!1,onOpen:function(){return!1},onClose:function(){return!1},type:"modal",confirmQuestion:"Are you sure?",confirmBtnText:"Yes",denyBtnText:"No",confirmAutofocus:".confirmBtn",onConfirm:function(e){return e.preventDefault(),console.log("confirmed"),!1},onDeny:function(e){return e.preventDefault(),!1}},e.jAlert=function(t){return e.fn.jAlert(t)},e.fn.alertOnClick=function(t){e(this).on("click",function(n){return n.preventDefault(),e.jAlert(t),!1})},e.alertOnClick=function(t,n){e("body").on("click",t,function(t){return t.preventDefault(),e.jAlert(n),!1})},e.fn.jAlert.debug=function(t){e.fn.jAlert.defaults.debug&&console.log("jAlert: "+t)};var t;e(window).resize(function(){window.clearTimeout(t),t=window.setTimeout(function(){e(".jAlert:visible").each(function(){e(this).centerAlert()})},200)}),e.fn.jAlert.mediaLoaded=function(e){var t=e.parents(".ja_media_wrap"),n=t.find(".ja_video");t.find(".ja_loader").remove(),n.length>0?n.fadeIn("fast"):e.fadeIn("fast"),e.parents(".jAlert").centerAlert()}}(jQuery);